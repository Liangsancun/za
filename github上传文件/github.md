# git通过ssh方式提交到github

[TOC]

> 默认单个文件大小100M之内

#### ==向同一个github下的不同仓库上传只需要一个公私钥对即可==

0.安装git

> 默认安装位置，装在c盘

#### 1. 下载git，C:\Program Files\Git\bin加入环境变量，并配置全局参数

![1557025625442](C:\Users\liangxiaochong\AppData\Roaming\Typora\typora-user-images\1557025625442.png)

进入cmd 配置全局参数，连接多个github仓库使用同一套

```python
git config --global user.name “lxc"
git config --global user.email "1320xxxxxxx@163.com"
git config --global default simple

# 参看git配置参数
git config -l
```



#### 2. 创建github仓库

> 1. Initialize this repository with a README：添加一个README
>
> 2. add .gitignore : 建立文件过滤规则，里面是不需要更改版本更改的文件，即上传后，以后都不动它了，类似
>
>    ```python 
>    # Built application files
>    *.apk
>    *.ap_
>    # Files for the ART/Dalvik VM
>    *.dex
>    # Java class files
>    *.class
>    # Generated files
>    bin/
>    gen/
>    out/
>    # Gradle files
>    .gradle/
>    build/
>    # Local configuration file (sdk path, etc)
>    local.properties
>    # Proguard folder generated by Eclipse
>    proguard/
>    # Log Files
>    *.log
>    # Android Studio Navigation editor temp files
>    .navigation/
>    # Android Studio captures folder
>    captures/
>    # Intellij
>    *.iml
>    .idea/workspace.xml
>    # Keystore files
>    *.jks
>    ```
>
> 3. add a license为开源许可证，即授权条款的法律文件。最基本，开源软件强迫任何使用和修改该软件的人承认发起人的著作权和所有参与人的贡献。任何人拥有可以自由复制、修改、使用这些源代码的权利，不得设置针对任何人或团体领域的限制；不得限制开源软件的商业使用等。

#### 3. 选择git提交到github的方式，选择ssh（公私钥方式）

```
两种方式：
	a. https 提交，需要输入账户密码；
	b. ssh 提交，RSA 验证，不需要输入账户密码。创建一个RSA公钥 / 私钥对，然后在 github 中添加公钥
```

#### 4. 配置公私钥

**向同一个github下的不同仓库上传只需要一个公私钥对即可**

##### a. 在~/.ssh/下生成公私钥对

```python
#右键单击git Bash 
cd ~/.ssh # ~/即用户的根目录 C:\Users\liangxiaochong，把所有的公私钥都存在这里
# 实际操作
ssh-keygen -f sancun#名字也无所谓，名字用不到
然后一路enter即可生成 a私钥和a.pub公钥

# 生成 ssh 公钥认证所需的公钥和私钥文件
ssh-keygen -t 类型(默认rsa) -f 文件名(默认id_rsa,id_rsa_pub公钥) -C 公钥中的备注
```

##### a.2在~/下无.ssh文件夹存在 #####

```python
直接创建.ssh文件夹，无法创建成功

#右键单击git Bash 
ssh-keygen
#会提示:Enter file in which to save the key (/c/Users/xlc/.ssh/id_rsa)? 按下enter，就会在~下创建.ssh文件夹及id_rsa私钥和公钥
```



##### b. 将该公私钥添加到~/.ssh下的config文件中（没有的话新建，config无后缀）

```python
#sancun
Host github.com # github网站的别名，给hostName 起个别名,后面创建库时会用到
HostName github.com #是目标主机的主机名，即网站名（或ip地址）
PreferredAuthentications publickey #强制使用公钥
IdentityFile ~/.ssh/sancun #私钥地址
```

##### c. 将公钥里的内容添加到github中

> setting->SSH and GPG keys，给公钥起什么名字无所谓，自己能知道就好

##### d. 验证是否成功配置SSH key

```python
# 右键单击git Bash
ssh -T git@github.com
Hi Liangsancun! You've successfully authenticated, but GitHub does not provide shell access.

表示成功了
```

#### 5. 首次上传。先进入项目目录，进入命令行cmd

```python
git init #在该目录下创建一个本地仓库，可能隐藏了，若没看到，让隐藏文件显示
git add . 或 git add a.txt/*.txt #将该目录下所有的文件添加到本地仓库
git commit -m 'comments' #提交该操作，并为该操作添加注释
git remote add origin ssh地址或https地址 #将本地库连接到github上的仓库
	其中git@github.com:Liangsancun/lang.git改为git@sancun(Host的名字/HostName的别名):Liangsancun/lang.git【如果config中的Host为sancun的话】
git push -u origin master #将本地（master）推送到主机（origin，即上面的github仓库地址，-u指定其为默认主机，后面上传就可以不加任何参数，直接使用git push了）
```



#### 6. 再次上传

```python
git add . 或git add a.txt/*.txt #将该目录下所有的文件添加到本地仓库
git commit -m 'say something' #提交本次操作，并为本次操作添加注释
git push # 将本地仓库的文件同步到github指定仓库 git push origin，当第一次-u指定origin后，就直接用git push了。
```

#### 7. 出现的问题

1. 

> 使用git add . 时，出现 ： git warning: LF will be replaced by CRLF in xx.py。
>
> > windows 中换行符为CRLF（回车换行），Linux中换行符为LF（换行）
> >
> > 在该文件中LF会被改成CRLF
>
> **solution**
>
> > git config --global core.autocrlf false  *//禁用自动转换*  
> >
> > git init
> >
> > git add . 
> >
> > ...

2. ```python
    当前电脑中文件版本还没有github上的新
       ! [rejected]        master -> master (fetch first)
   error: failed to push some refs to 'git@github.com:Liangsancun/kaggle-.git'
   hint: Updates were rejected because the remote contains work that you do
   hint: not have locally. This is usually caused by another repository pushing
   hint: to the same ref. You may want to first integrate the remote changes
   hint: (e.g., 'git pull ...') before pushing again.
   hint: See the 'Note about fast-forwards' in 'git push --help' for details.
   
   #原因:
   在push时出现：（第一次push【在github上先修改了readme.md】，之后push【电脑中文件的版本比github上还旧，因为其他人更新的原因】
   #解决办法：
   第一次push：git push -f -u origin master
   之后push：git push -f
   ```

   3. ```python
      #问题:
      打开cmd 出现：警告: git command could not be found. Please create an alias or add it to your PATH. 也无法使用git命令
      
      #解决办法：
      使用git bash， 单击右键即可
      ```

   4. ```python
      #问题
      git push时出现：
      ssh: connect to host github.com port 22: Connection timed out
      fatal: Could not read from remote repository.
      
      Please make sure you have the correct access rights
      and the repository exists.
      
      # 原因：之前保存的github的ip地址不能用了
      #解决办法
      22端口号是ssh的端口号
      我在hosts文件里添加了新查找的github.com的IP地址，就可以了【git push的时候，又自动把ip地址放到.ssh里的know_hosts文件里。
      ```
   
   5. 